{"ast":null,"code":"import _regeneratorRuntime from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/src/components/Users/UserProfile.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport API from \"../../services/api\";\nimport { getOrderHistory as _getOrderHistory, setUser as _setUser } from \"../../store/action/actions\";\n\nvar UserProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserProfile, _Component);\n\n  function UserProfile(props) {\n    var _this;\n\n    _classCallCheck(this, UserProfile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserProfile).call(this, props));\n\n    _this.deleteAccount = function () {\n      API.deleteUser(_this.props.user.id).then(function () {\n        _this.setState({\n          deleteConfirmation: true\n        });\n\n        setTimeout(function () {\n          _this.setState({\n            deleteConfirmation: false\n          }, function () {\n            _this.props.setUser(null);\n\n            _this.props.history.push(\"/login\");\n          });\n        }, 3000);\n      });\n    };\n\n    _this.profileChange = function (event, key) {\n      console.log(\"value you are typing: \", event.target.value);\n      console.log(\"updating: \", event.target.id);\n\n      _this.setState(_defineProperty({}, key, event.target.value));\n    };\n\n    _this.changePassword = function () {\n      if (password1.trim() === \"\" || password2.trim() === \"\") {\n        _this.setState({\n          changePasswordError: true,\n          changePasswordErrorText: \"You have to fill both password fields\"\n        });\n      }\n\n      if (password1 !== password2) {\n        _this.setState({\n          changePasswordError: true,\n          changePasswordErrorText: \"Passwords must match\"\n        });\n      } else {\n        _this.setState({\n          changePasswordError: false\n        });\n\n        console.log(\"time to change passowrd: \");\n        console.log(_this.state.password1);\n      }\n    };\n\n    _this.profileSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var updatedUser, updateShipping;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                updatedUser = _this.props.user;\n                updatedUser[\"firstName\"] = _this.state.firstName;\n                updatedUser[\"lastName\"] = _this.state.lastName;\n                updateShipping = {\n                  id: _this.state.shippingId,\n                  firstName: _this.state.firstName,\n                  lastName: _this.state.lastName,\n                  address: _this.state.address,\n                  city: _this.state.city,\n                  postalCode: _this.state.postalCode,\n                  user_id: _this.props.user.id\n                };\n                API.putShipping(updateShipping).then(function () {\n                  return API.updateUser(updatedUser).then(function () {\n                    _this.setState({\n                      updatConfirmation: true\n                    });\n\n                    setTimeout(function () {\n                      _this.setState({\n                        updatConfirmation: false\n                      });\n                    }, 4000);\n                  });\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      isLoading: false,\n      firstName: \"Idris\",\n      lastName: \"Hamid\",\n      address: \"\",\n      postalCode: \"\",\n      shippingId: \"\",\n      updatConfirmation: false,\n      deleteConfirmation: false,\n      password1: \"\",\n      password2: \"\",\n      changePasswordError: \"\",\n      changePasswordErrorText: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(UserProfile, [{\n    key: \"validateForm\",\n    value: function validateForm() {\n      return this.state.email.length > 0 && this.state.password.length > 0 && this.state.password === this.state.confirmPassword;\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var id = this.props.match.params[\"id\"];\n      API.getUserById(id).then(function (user) {\n        console.log(user);\n        API.getshippingById(user.shippingList[0]).then(function (shippingInfo) {\n          console.log(\"shipping info: \", shippingInfo);\n\n          _this2.setState({\n            firstName: user.firstName,\n            lastName: user.lastName,\n            email: user.email,\n            address: shippingInfo.address,\n            city: shippingInfo.city,\n            postalCode: shippingInfo.postalCode,\n            shippingId: shippingInfo.id\n          });\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(this.state.firstName);\n      return React.createElement(\"div\", {\n        className: \"signup-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, this.state.deleteConfirmation && React.createElement(\"div\", {\n        class: \"alert alert-danger mx-auto\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"The account has been parmenantly deleted\"), this.state.updatConfirmation && React.createElement(\"div\", {\n        class: \"alert alert-success mx-auto\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"The profile been successfully updated\"), React.createElement(\"form\", {\n        onSubmit: this.profileSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Profile\"), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-xs-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"first_name\",\n        placeholder: \"First Name\",\n        required: \"required\",\n        value: this.state.firstName,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"firstName\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-xs-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"last_name\",\n        placeholder: \"Last Name\",\n        required: \"required\",\n        value: this.state.lastName,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"lastName\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"form-group\",\n        bsSize: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Address\",\n        value: this.state.address,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"address\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        bsSize: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"city\",\n        value: this.state.city,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"city\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        bsSize: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"postalcode\",\n        value: this.state.postalCode,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"postalCode\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success btn-lg btn-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"UPDATE\"))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-danger btn-lg btn-block\",\n        \"data-toggle\": \"collapse\",\n        \"data-target\": \"#collapseExample\",\n        \"aria-expanded\": \"false\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"CHANGE PASSWORD\"), React.createElement(\"div\", {\n        class: \"collapse\",\n        id: \"collapseExample\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, this.state.changePasswordError && React.createElement(\"div\", {\n        class: \"alert alert-danger mx-auto\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, this.state.changePasswordErrorText), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"exampleInputPassword1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"New password\"), React.createElement(\"input\", {\n        value: this.state.password1,\n        onChange: function onChange(e) {\n          return _this3.setState({\n            password1: e.target.value\n          });\n        },\n        type: \"password\",\n        class: \"form-control\",\n        id: \"exampleInputPassword1\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"exampleInputPassword1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Confirm new password\"), React.createElement(\"input\", {\n        value: this.state.password2,\n        onChange: function onChange(e) {\n          return _this3.setState({\n            password2: e.target.value\n          });\n        },\n        type: \"password\",\n        class: \"form-control\",\n        id: \"exampleInputPassword1\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        onClick: this.changePassword,\n        type: \"submit\",\n        class: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"Change\")))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.deleteAccount,\n        className: \"btn btn-danger btn-lg btn-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"DELETE ACCOUNT\")));\n    }\n  }]);\n\n  return UserProfile;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.rootReducer.user\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getOrderHistory: function getOrderHistory(id) {\n      return dispatch(_getOrderHistory(id));\n    },\n    setUser: function setUser(user) {\n      return dispatch(_setUser(user));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserProfile);","map":{"version":3,"sources":["/Users/abdifatah/Downloads/final-project-dave3615/react-app/src/components/Users/UserProfile.js"],"names":["React","Component","connect","API","getOrderHistory","setUser","UserProfile","props","deleteAccount","deleteUser","user","id","then","setState","deleteConfirmation","setTimeout","history","push","profileChange","event","key","console","log","target","value","changePassword","password1","trim","password2","changePasswordError","changePasswordErrorText","state","profileSubmit","preventDefault","updatedUser","firstName","lastName","updateShipping","shippingId","address","city","postalCode","user_id","putShipping","updateUser","updatConfirmation","isLoading","email","length","password","confirmPassword","match","params","getUserById","getshippingById","shippingList","shippingInfo","catch","err","e","mapStateToProps","rootReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport API from \"../../services/api\";\nimport { getOrderHistory, setUser } from \"../../store/action/actions\";\n\nclass UserProfile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: false,\n      firstName: \"Idris\",\n      lastName: \"Hamid\",\n      address: \"\",\n      postalCode: \"\",\n      shippingId: \"\",\n      updatConfirmation: false,\n      deleteConfirmation: false,\n      password1: \"\",\n      password2: \"\",\n      changePasswordError: \"\",\n      changePasswordErrorText: \"\"\n    };\n  }\n\n  deleteAccount = () => {\n    API.deleteUser(this.props.user.id).then(() => {\n      this.setState({ deleteConfirmation: true });\n      setTimeout(() => {\n        this.setState({ deleteConfirmation: false }, () => {\n          this.props.setUser(null);\n          this.props.history.push(\"/login\");\n        });\n      }, 3000);\n    });\n  };\n\n  profileChange = (event, key) => {\n    console.log(\"value you are typing: \", event.target.value);\n    console.log(\"updating: \", event.target.id);\n    this.setState({\n      [key]: event.target.value\n    });\n  };\n\n  validateForm() {\n    return (\n      this.state.email.length > 0 &&\n      this.state.password.length > 0 &&\n      this.state.password === this.state.confirmPassword\n    );\n  }\n\n  changePassword = () => {\n    if (password1.trim() === \"\" || password2.trim() === \"\") {\n      this.setState({\n        changePasswordError: true,\n        changePasswordErrorText: \"You have to fill both password fields\"\n      });\n    }\n    if (password1 !== password2) {\n      this.setState({\n        changePasswordError: true,\n        changePasswordErrorText: \"Passwords must match\"\n      });\n    } else {\n      this.setState({ changePasswordError: false });\n      console.log(\"time to change passowrd: \");\n      console.log(this.state.password1);\n    }\n  };\n\n  profileSubmit = async event => {\n    event.preventDefault();\n\n    let updatedUser = this.props.user;\n    updatedUser[\"firstName\"] = this.state.firstName;\n    updatedUser[\"lastName\"] = this.state.lastName;\n\n    let updateShipping = {\n      id: this.state.shippingId,\n      firstName: this.state.firstName,\n      lastName: this.state.lastName,\n      address: this.state.address,\n      city: this.state.city,\n      postalCode: this.state.postalCode,\n      user_id: this.props.user.id\n    };\n\n    API.putShipping(updateShipping).then(() =>\n      API.updateUser(updatedUser).then(() => {\n        this.setState({ updatConfirmation: true });\n        setTimeout(() => {\n          this.setState({ updatConfirmation: false });\n        }, 4000);\n      })\n    );\n  };\n\n  componentWillMount() {\n    const id = this.props.match.params[\"id\"];\n    API.getUserById(id).then(user => {\n      console.log(user);\n      API.getshippingById(user.shippingList[0])\n        .then(shippingInfo => {\n          console.log(\"shipping info: \", shippingInfo);\n          this.setState({\n            firstName: user.firstName,\n            lastName: user.lastName,\n            email: user.email,\n            address: shippingInfo.address,\n            city: shippingInfo.city,\n            postalCode: shippingInfo.postalCode,\n            shippingId: shippingInfo.id\n          });\n        })\n        .catch(err => console.log(err));\n    });\n  }\n\n  render() {\n    console.log(this.state.firstName);\n    return (\n      <div className=\"signup-form\">\n        {this.state.deleteConfirmation && (\n          <div class=\"alert alert-danger mx-auto\" role=\"alert\">\n            The account has been parmenantly deleted\n          </div>\n        )}\n        {this.state.updatConfirmation && (\n          <div class=\"alert alert-success mx-auto\" role=\"alert\">\n            The profile been successfully updated\n          </div>\n        )}\n        <form onSubmit={this.profileSubmit}>\n          <h2>Profile</h2>\n\n          <div className=\"form-group\">\n            <div className=\"row\">\n              <div className=\"col-xs-6\">\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"first_name\"\n                  placeholder=\"First Name\"\n                  required=\"required\"\n                  value={this.state.firstName}\n                  onChange={event => this.profileChange(event, \"firstName\")}\n                />\n              </div>\n              <div className=\"col-xs-6\">\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"last_name\"\n                  placeholder=\"Last Name\"\n                  required=\"required\"\n                  value={this.state.lastName}\n                  onChange={event => this.profileChange(event, \"lastName\")}\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"form-group\" bsSize=\"large\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Address\"\n              value={this.state.address}\n              onChange={event => this.profileChange(event, \"address\")}\n            />\n          </div>\n          <div className=\"form-group\" bsSize=\"large\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"city\"\n              value={this.state.city}\n              onChange={event => this.profileChange(event, \"city\")}\n            />\n          </div>\n          <div className=\"form-group\" bsSize=\"large\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"postalcode\"\n              value={this.state.postalCode}\n              onChange={event => this.profileChange(event, \"postalCode\")}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <button type=\"submit\" className=\"btn btn-success btn-lg btn-block\">\n              UPDATE\n            </button>\n          </div>\n        </form>\n\n        <div className=\"form-group\">\n          <button\n            className=\"btn btn-danger btn-lg btn-block\"\n            data-toggle=\"collapse\"\n            data-target=\"#collapseExample\"\n            aria-expanded=\"false\"\n          >\n            CHANGE PASSWORD\n          </button>\n\n          <div class=\"collapse\" id=\"collapseExample\">\n            <form>\n              {this.state.changePasswordError && (\n                <div class=\"alert alert-danger mx-auto\" role=\"alert\">\n                  {this.state.changePasswordErrorText}\n                </div>\n              )}\n              <div class=\"form-group\">\n                <label for=\"exampleInputPassword1\">New password</label>\n                <input\n                  value={this.state.password1}\n                  onChange={e => this.setState({ password1: e.target.value })}\n                  type=\"password\"\n                  class=\"form-control\"\n                  id=\"exampleInputPassword1\"\n                  placeholder=\"Password\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <label for=\"exampleInputPassword1\">Confirm new password</label>\n                <input\n                  value={this.state.password2}\n                  onChange={e => this.setState({ password2: e.target.value })}\n                  type=\"password\"\n                  class=\"form-control\"\n                  id=\"exampleInputPassword1\"\n                  placeholder=\"Password\"\n                />\n              </div>\n\n              <button\n                onClick={this.changePassword}\n                type=\"submit\"\n                class=\"btn btn-primary\"\n              >\n                Change\n              </button>\n            </form>\n          </div>\n        </div>\n        <div className=\"form-group\">\n          <button\n            onClick={this.deleteAccount}\n            className=\"btn btn-danger btn-lg btn-block\"\n          >\n            DELETE ACCOUNT\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.rootReducer.user\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getOrderHistory: id => dispatch(getOrderHistory(id)),\n    setUser: user => dispatch(setUser(user))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(UserProfile);\n"]},"metadata":{},"sourceType":"module"}