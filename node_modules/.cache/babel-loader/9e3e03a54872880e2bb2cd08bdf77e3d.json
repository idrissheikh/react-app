{"ast":null,"code":"import _regeneratorRuntime from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/abdifatah/Downloads/final-project-dave3615/react-app/src/components/Users/UserProfile.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport API from \"../../services/api\";\nimport { getOrderHistory as _getOrderHistory, setUser as _setUser } from \"../../store/action/actions\";\n\nvar UserProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserProfile, _Component);\n\n  function UserProfile(props) {\n    var _this;\n\n    _classCallCheck(this, UserProfile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserProfile).call(this, props));\n\n    _this.deleteAccount = function () {\n      API.deleteUser(_this.props.user.id).then(function () {\n        _this.setState({\n          deleteConfirmation: true\n        });\n\n        setTimeout(function () {\n          _this.setState({\n            deleteConfirmation: false\n          }, function () {\n            _this.props.setUser(null);\n\n            _this.props.history.push(\"/login\");\n          });\n        }, 3000);\n      });\n    };\n\n    _this.profileChange = function (event, key) {\n      console.log(\"value you are typing: \", event.target.value);\n      console.log(\"updating: \", event.target.id);\n\n      _this.setState(_defineProperty({}, key, event.target.value));\n    };\n\n    _this.profileSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var updatedUser, updateShipping;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                updatedUser = _this.props.user;\n                updatedUser[\"firstName\"] = _this.state.firstName;\n                updatedUser[\"lastName\"] = _this.state.lastName;\n                updateShipping = {\n                  id: _this.state.shippingId,\n                  firstName: _this.state.firstName,\n                  lastName: _this.state.lastName,\n                  address: _this.state.address,\n                  city: _this.state.city,\n                  postalCode: _this.state.postalCode,\n                  user_id: _this.props.user.id\n                };\n                API.putShipping(updateShipping).then(function () {\n                  return API.updateUser(updatedUser).then(function () {\n                    _this.setState({\n                      updatConfirmation: true\n                    });\n\n                    setTimeout(function () {\n                      _this.setState({\n                        updatConfirmation: false\n                      });\n                    }, 4000);\n                  });\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      isLoading: false,\n      firstName: \"Idris\",\n      lastName: \"Hamid\",\n      address: \"\",\n      postalCode: \"\",\n      shippingId: \"\",\n      updatConfirmation: false,\n      deleteConfirmation: false\n    };\n    return _this;\n  }\n\n  _createClass(UserProfile, [{\n    key: \"validateForm\",\n    value: function validateForm() {\n      return this.state.email.length > 0 && this.state.password.length > 0 && this.state.password === this.state.confirmPassword;\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var id = this.props.match.params[\"id\"];\n      API.getUserById(id).then(function (user) {\n        console.log(user);\n        API.getshippingById(user.shippingList[0]).then(function (shippingInfo) {\n          console.log(\"shipping info: \", shippingInfo);\n\n          _this2.setState({\n            firstName: user.firstName,\n            lastName: user.lastName,\n            email: user.email,\n            address: shippingInfo.address,\n            city: shippingInfo.city,\n            postalCode: shippingInfo.postalCode,\n            shippingId: shippingInfo.id\n          });\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(this.state.firstName);\n      return React.createElement(\"div\", {\n        className: \"signup-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, this.state.deleteConfirmation && React.createElement(\"div\", {\n        class: \"alert alert-success mx-auto\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Your account has been parmenantly deleted\")), this.state.updatConfirmation && React.createElement(\"div\", {\n        class: \"alert alert-success mx-auto\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Your profile has been successfully updated\"), React.createElement(\"form\", {\n        onSubmit: this.profileSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Profile\"), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-xs-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"first_name\",\n        placeholder: \"First Name\",\n        required: \"required\",\n        value: this.state.firstName,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"firstName\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-xs-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"last_name\",\n        placeholder: \"Last Name\",\n        required: \"required\",\n        value: this.state.lastName,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"lastName\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"form-group\",\n        bsSize: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Address\",\n        value: this.state.address,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"address\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        bsSize: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"city\",\n        value: this.state.city,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"city\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        bsSize: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"postalcode\",\n        value: this.state.postalCode,\n        onChange: function onChange(event) {\n          return _this3.profileChange(event, \"postalCode\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success btn-lg btn-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"UPDATE\"))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.deleteAccount,\n        className: \"btn btn-danger btn-lg btn-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"DELETE ACCOUNT\")));\n    }\n  }]);\n\n  return UserProfile;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.rootReducer.user\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getOrderHistory: function getOrderHistory(id) {\n      return dispatch(_getOrderHistory(id));\n    },\n    setUser: function setUser(user) {\n      return dispatch(_setUser(user));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserProfile);","map":{"version":3,"sources":["/Users/abdifatah/Downloads/final-project-dave3615/react-app/src/components/Users/UserProfile.js"],"names":["React","Component","connect","API","getOrderHistory","setUser","UserProfile","props","deleteAccount","deleteUser","user","id","then","setState","deleteConfirmation","setTimeout","history","push","profileChange","event","key","console","log","target","value","profileSubmit","preventDefault","updatedUser","state","firstName","lastName","updateShipping","shippingId","address","city","postalCode","user_id","putShipping","updateUser","updatConfirmation","isLoading","email","length","password","confirmPassword","match","params","getUserById","getshippingById","shippingList","shippingInfo","catch","err","mapStateToProps","rootReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport API from \"../../services/api\";\nimport { getOrderHistory, setUser } from \"../../store/action/actions\";\n\nclass UserProfile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: false,\n      firstName: \"Idris\",\n      lastName: \"Hamid\",\n      address: \"\",\n      postalCode: \"\",\n      shippingId: \"\",\n      updatConfirmation: false,\n      deleteConfirmation: false\n    };\n  }\n\n  deleteAccount = () => {\n    API.deleteUser(this.props.user.id).then(() => {\n      this.setState({ deleteConfirmation: true });\n      setTimeout(() => {\n        this.setState({ deleteConfirmation: false }, () => {\n          this.props.setUser(null);\n          this.props.history.push(\"/login\");\n        });\n      }, 3000);\n    });\n  };\n\n  profileChange = (event, key) => {\n    console.log(\"value you are typing: \", event.target.value);\n    console.log(\"updating: \", event.target.id);\n    this.setState({\n      [key]: event.target.value\n    });\n  };\n\n  validateForm() {\n    return (\n      this.state.email.length > 0 &&\n      this.state.password.length > 0 &&\n      this.state.password === this.state.confirmPassword\n    );\n  }\n\n  profileSubmit = async event => {\n    event.preventDefault();\n\n    let updatedUser = this.props.user;\n    updatedUser[\"firstName\"] = this.state.firstName;\n    updatedUser[\"lastName\"] = this.state.lastName;\n\n    let updateShipping = {\n      id: this.state.shippingId,\n      firstName: this.state.firstName,\n      lastName: this.state.lastName,\n      address: this.state.address,\n      city: this.state.city,\n      postalCode: this.state.postalCode,\n      user_id: this.props.user.id\n    };\n\n    API.putShipping(updateShipping).then(() =>\n      API.updateUser(updatedUser).then(() => {\n        this.setState({ updatConfirmation: true });\n        setTimeout(() => {\n          this.setState({ updatConfirmation: false });\n        }, 4000);\n      })\n    );\n  };\n\n  componentWillMount() {\n    const id = this.props.match.params[\"id\"];\n    API.getUserById(id).then(user => {\n      console.log(user);\n      API.getshippingById(user.shippingList[0])\n        .then(shippingInfo => {\n          console.log(\"shipping info: \", shippingInfo);\n          this.setState({\n            firstName: user.firstName,\n            lastName: user.lastName,\n            email: user.email,\n            address: shippingInfo.address,\n            city: shippingInfo.city,\n            postalCode: shippingInfo.postalCode,\n            shippingId: shippingInfo.id\n          });\n        })\n        .catch(err => console.log(err));\n    });\n  }\n\n  render() {\n    console.log(this.state.firstName);\n    return (\n      <div className=\"signup-form\">\n        {this.state.deleteConfirmation && (\n          <div class=\"alert alert-success mx-auto\" role=\"alert\">\n            <h3 className=\"text-danger\">\n              Your account has been parmenantly deleted\n            </h3>\n          </div>\n        )}\n        {this.state.updatConfirmation && (\n          <div class=\"alert alert-success mx-auto\" role=\"alert\">\n            Your profile has been successfully updated\n          </div>\n        )}\n        <form onSubmit={this.profileSubmit}>\n          <h2>Profile</h2>\n\n          <div className=\"form-group\">\n            <div className=\"row\">\n              <div className=\"col-xs-6\">\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"first_name\"\n                  placeholder=\"First Name\"\n                  required=\"required\"\n                  value={this.state.firstName}\n                  onChange={event => this.profileChange(event, \"firstName\")}\n                />\n              </div>\n              <div className=\"col-xs-6\">\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"last_name\"\n                  placeholder=\"Last Name\"\n                  required=\"required\"\n                  value={this.state.lastName}\n                  onChange={event => this.profileChange(event, \"lastName\")}\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"form-group\" bsSize=\"large\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Address\"\n              value={this.state.address}\n              onChange={event => this.profileChange(event, \"address\")}\n            />\n          </div>\n          <div className=\"form-group\" bsSize=\"large\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"city\"\n              value={this.state.city}\n              onChange={event => this.profileChange(event, \"city\")}\n            />\n          </div>\n          <div className=\"form-group\" bsSize=\"large\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"postalcode\"\n              value={this.state.postalCode}\n              onChange={event => this.profileChange(event, \"postalCode\")}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <button type=\"submit\" className=\"btn btn-success btn-lg btn-block\">\n              UPDATE\n            </button>\n          </div>\n        </form>\n\n        <div className=\"form-group\">\n          <button\n            onClick={this.deleteAccount}\n            className=\"btn btn-danger btn-lg btn-block\"\n          >\n            DELETE ACCOUNT\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.rootReducer.user\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getOrderHistory: id => dispatch(getOrderHistory(id)),\n    setUser: user => dispatch(setUser(user))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(UserProfile);\n"]},"metadata":{},"sourceType":"module"}